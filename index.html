<!DOCTYPE html>
<html lang="en">
  <head>
    <title>The 100 Most Backed Kickstarter Projects</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- import the webpage's stylesheet -->
    <link rel="stylesheet" href="/style.css">
  </head>  
  <body>
    <script src="https://cdn.freecodecamp.org/testable-projects-fcc/v1/bundle.js"></script>
    <h1 id="title">The 100 Most Backed Kickstarter Projects</h1>
    <h3 id="description">Grouped by category</h3>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://d3js.org/d3-dsv.v1.min.js"></script>
    <script src="https://d3js.org/d3-fetch.v1.min.js"></script>
    <script src="https://d3js.org/d3-hierarchy.v1.min.js"></script>
    <script>
      const getCategoryColors = category => {
        switch(category){
          case "Product Design":
            return "blue";
            break;
          case "Tabletop Games":
            return "red";
            break;
          default: return "black";
        }
      }
      
      d3.json("https://cdn.rawgit.com/freeCodeCamp/testable-projects-fcc/a80ce8f9/src/data/tree_map/kickstarter-funding-data.json").then(function(data){
        const root = d3.hierarchy(data);
        root.sum(d=>d.value)
        const treemap = d3.treemap().size([500,500])
        treemap(root)
        console.log(root.leaves())
        const svg = d3.select("body").append("svg").attr("width",600).attr("height",600)
        svg.selectAll("rect")
          .data(root.leaves())
          .enter().append("rect")
          .attr("class","tile")
          .attr("data-name",d=>d.data.name)
          .attr("data-category",d=>d.data.category)
          .attr("data-value",d=>d.data.value)
          .attr("x",d=>d.x0)
          .attr("y",d=>d.y0)
          .attr("width",d=>d.x1 - d.x0)
          .attr("height",d=>d.y1 -d.y0)
          .attr("fill",d=>getCategoryColors(d.data.category))
      })
    </script>
    <!-- include the Glitch button to show what the webpage is about and
          to make it easier for folks to view source and remix -->
    <div class="glitchButton" style="position:fixed;top:20px;right:20px;"></div>
    <script src="https://button.glitch.me/button.js"></script>
  </body>
</html>
